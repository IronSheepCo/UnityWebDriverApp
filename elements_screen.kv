#:kivy 1.0

#:set height 30

ElementsScreen:
    
    name:"elements"
    
    label: label
    xpath_query: xpath_query
    query_response: query_response
    text_uuid: text_uuid  
    extra_param: extra_param 
    response_area: response_area
 
    StackLayout:
        
        Label:
            id:label
            height:height
            size_hint:1, None

        Label:
            text:"XPath query"
            height:height
            size_hint:0.5, None
        
        TextInput:
            id:xpath_query
            text:"//uibutton"
            multiline:False
            height:height
            size_hint:0.5, None

        Button:
            id:query_button
            text:"Run query"
            height:height
            size_hint:1, None
            on_press:root.run_query_callback(self)
        
        Label:
            text:"Response results"
            height:height
            size_hint:0.5, None

        Label:
            text:"Current test case"
            height:height
            size_hint:0.5, None

        ScrollView:
            size_hint:0.5, 0.5
            
            TreeView:
                id:query_response
                size_hint:1, None
                root_options: {'text':'Result'}

        TestCaseView:
            id:test_case_view
            test_case_list:test_case_list
            size_hint:0.5, 0.5

            StackLayout:
                size_hint:1, 1

                BoxLayout:
                    orientation:'horizontal'
                    height:height
                    size_hint:1, None

                    Button:
                        text:'Load test'
                        on_press:test_case_view.load_test_pressed(self)
                        
                    Button:
                        text:'Save test'
                        on_press:test_case_view.save_test_pressed(self)

                    Button:
                        text:'+ Add step'
                        on_press:test_case_view.add_step(self)
                    
                    Button:
                        text:'Run'
                        on_press:test_case_view.run_test_case(self)
                
                    Button:
                        text:'Clear'
                        on_press:test_case_view.clear()

                ScrollView:
                    size_hint:1, None
                    height:270
                    TreeView:
                        hide_root: True
                        size_hint:1, None
                        id:test_case_list
                        
        Label:
            text:"Test zone"
            height:height
            size_hint:1, None
           
        Label:
            text:"UUID"
            height:height
            size_hint:0.1, None
            halign:"left"
            valign:"middle"

        TextInput:
            id:text_uuid
            height:height
            multiline:False
            size_hint:0.4, None

        Button:
            text:"Click"
            height:height
            size_hint:0.15, None
            on_press:root.pressed_click(self)

        Button:
            text:"Attribute"
            height:height
            size_hint:0.15, None
            on_press:root.pressed_attribute(self)

        Button:
            text:"Send keys"
            height:height
            size_hint:0.15, None
            on_press:root.pressed_send_keys(self)

        Label:
            text:"Extra param"
            height:height
            size_hint:0.1, None
            halign:"left"
            valign:"middle"

        TextInput:
            id:extra_param
            height:height
            size_hint:0.4, None

        Button:
            text:"Name"
            height:height
            size_hint:0.15, None
            on_press:root.pressed_get_name(self)

        Button:
            text:"Text"
            height:height
            size_hint:0.15, None
            on_press:root.pressed_get_text(self)

        Button:
            text:"Highlight"
            height:height
            size_hint:0.15, None
            on_press:root.pressed_highlight(self)

        Label:
            text:"Response"
            height:height
            size_hint:1, None
        
        TextInput:
            id:response_area
            height:2*height
            size_hint:1, None

<LoadDialog>:
    BoxLayout:
        size: root.size
        pos: root.pos
        orientation: "vertical"
        FileChooserIconView:
            id: filechooser

        BoxLayout:
            size_hint_y: None
            height: 30
            Button:
                text: "Cancel"
                on_release: root.cancel()

            Button:
                text: "Load"
                on_release: root.load(filechooser.path, filechooser.selection)

<SaveDialog>:
    text_input: text_input
    BoxLayout:
        size: root.size
        pos: root.pos
        orientation: "vertical"
        FileChooserIconView:
            id: filechooser
            on_selection: text_input.text = self.selection and self.selection[0] or ''

        TextInput:
            id: text_input
            size_hint_y: None
            height: 30
            multiline: False

        BoxLayout:
            size_hint_y: None
            height: 30
            Button:
                text: "Cancel"
                on_release: root.cancel()

            Button:
                text: "Save"
                on_release: root.save(filechooser.path, text_input.text)
